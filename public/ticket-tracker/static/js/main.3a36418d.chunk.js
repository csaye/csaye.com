(this["webpackJsonpticket-tracker"]=this["webpackJsonpticket-tracker"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"priorities":[{"name":"Low Priority","className":"priority-low"},{"name":"Medium Priority","className":"priority-medium"},{"name":"High Priority","className":"priority-high"}]}')},24:function(e,t,c){},25:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(4),i=c.n(r),a=c(16),s=c.n(a),o=(c(24),c(25),c(3)),u=(c(36),c(27),c(17)),l=c(8),d=c.n(l),j=c(11),b=c(7),h=(c(30),c(13)),p=(c(31),c(18).priorities.map((function(e){return[e.name,e.className]}))),f=c.p+"static/media/default_profile.b67f3a86.png";var O=function(e){var t=e.message,c=t.title,i=t.description,a=t.id,s=t.photoURL,u=t.displayName,l=t.createdAt,h=t.priority,O=Object(r.useState)(!1),x=Object(b.a)(O,2),m=x[0],v=x[1],g=Object(r.useState)(!1),k=Object(b.a)(g,2),y=k[0],w=k[1],N=Object(r.useState)(""),S=Object(b.a)(N,2),C=S[0],T=S[1],U=Object(r.useState)(""),D=Object(b.a)(U,2),L=D[0],I=D[1];function R(){return(R=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,o.a.firestore().collection("tickets").doc(a).update({title:C,description:L});case 3:v(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.firestore().collection("tickets").doc(a).update({priority:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.jsxs)("div",{className:"Ticket ".concat(h),children:[Object(n.jsxs)("p",{children:["Created by ",u]}),l&&Object(n.jsxs)("p",{children:[l.toDate().toDateString()," ",l.toDate().toLocaleTimeString()]}),Object(n.jsx)("img",{src:s||f,alt:""}),Object(n.jsx)("select",{value:h,onChange:function(e){return function(e){return A.apply(this,arguments)}(e.target.value)},children:p.map((function(e){return Object(n.jsx)("option",{value:e[1],children:e[0]},e[1])}))}),Object(n.jsx)("h1",{children:c}),Object(n.jsx)("p",{children:i}),Object(n.jsx)("button",{onClick:function(){return w(!0)},children:"Resolve"}),Object(n.jsx)("button",{onClick:function(){T(c),I(i),v(!0)},children:"Edit"}),m&&Object(n.jsx)("div",{className:"modal",children:Object(n.jsxs)("div",{className:"modal-content ticket-modal",children:[Object(n.jsx)("h1",{children:"Editing Ticket"}),Object(n.jsxs)("form",{onSubmit:function(e){return R.apply(this,arguments)},children:[Object(n.jsx)("input",{value:C,placeholder:"Title",onChange:function(e){return T(e.target.value)},required:!0}),Object(n.jsx)("textarea",{value:L,placeholder:"Description",onChange:function(e){return I(e.target.value)},rows:"4",required:!0}),Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{type:"button",onClick:function(){return v(!1)},children:"Discard changes"}),Object(n.jsx)("button",{type:"submit",children:"Save changes"})]})]})]})}),y&&Object(n.jsx)("div",{className:"modal",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsx)("h1",{children:"Resolving Ticket"}),Object(n.jsx)("p",{children:"This action is irreversible."}),Object(n.jsx)("button",{onClick:function(){return w(!1)},children:"Cancel"}),Object(n.jsx)("button",{onClick:function(){o.a.firestore().collection("tickets").doc(a).delete()},children:"Resolve"})]})})]})};var x=function(){var e=Object(r.useState)(p[0][1]),t=Object(b.a)(e,2),c=t[0],i=t[1],a=Object(r.useState)(""),s=Object(b.a)(a,2),u=s[0],l=s[1],f=Object(r.useState)(""),x=Object(b.a)(f,2),m=x[0],v=x[1],g=Object(r.useState)([]),k=Object(b.a)(g,2),y=k[0],w=k[1];function N(e){var t=e.target.checked,c=e.target.getAttribute("priority");t?function(e){if(-1!==y.indexOf(e))return;var t=y.slice();t.push(e),w(t)}(c):function(e){var t=y.indexOf(e);if(-1===t)return;var c=y.slice();c.splice(t,1),w(c)}(c)}var S=o.a.auth().currentUser.uid,C=o.a.firestore().collection("users").doc(S),T=Object(h.b)(C),U=Object(b.a)(T,1)[0],D=o.a.firestore().collection("tickets"),L=D.where("uid","==",S).where("subtopic","==",U?U.subtopic:"").orderBy("createdAt"),I=Object(h.a)(L,{idField:"id"}),R=Object(b.a)(I,1)[0],A=null===R||void 0===R?void 0:R.filter((function(e){return 0===y.length||y.includes(e.priority)})),F=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=o.a.auth().currentUser,r=n.uid,a=n.photoURL,s=n.displayName,!(R.length<128)){e.next=7;break}return e.next=5,D.add({priority:c,title:u,description:m,createdAt:new Date,displayName:s,uid:r,photoURL:a,subtopic:U.subtopic});case 5:e.next=8;break;case 7:alert("Too many tickets.");case 8:i(p[0][1]),l(""),v("");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"Homescreen",children:[Object(n.jsx)("div",{className:"TicketInput",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("form",{onSubmit:F,children:[Object(n.jsx)("select",{value:c,onChange:function(e){return i(e.target.value)},required:!0,children:p.map((function(e){return Object(n.jsx)("option",{value:e[1],children:e[0]},e[1])}))}),Object(n.jsx)("input",{value:u,placeholder:"Title",onChange:function(e){return l(e.target.value)},required:!0}),Object(n.jsx)("textarea",{value:m,placeholder:"Description",onChange:function(e){return v(e.target.value)},rows:"4",required:!0}),Object(n.jsx)("button",{type:"submit",children:"Open Ticket"})]}),Object(n.jsxs)("div",{className:"checkboxes",children:[Object(n.jsx)("p",{children:Object(n.jsxs)("u",{children:["Showing",y.length>0?":":" All"]})}),p.map((function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"checkbox-".concat(e[1]),children:e[0]},"label-".concat(e[1])),Object(n.jsx)("input",{type:"checkbox",id:"checkbox-".concat(e[1]),priority:e[1],onChange:N},"checkbox-".concat(e[1]))]},"div-".concat(e[1]))}))]})]})}),Object(n.jsx)("div",{className:"TicketList",children:A?Object(n.jsx)(n.Fragment,{children:A.length>0?A.map((function(e){return Object(n.jsx)(O,{message:e},e.id)})):Object(n.jsx)("p",{children:"No tickets yet"})}):Object(n.jsx)("p",{children:"Retrieving tickets..."})})]})};c(32);var m=function(){return Object(n.jsx)("div",{className:"SignIn",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:Object(n.jsx)("u",{children:"Ticket Tracker"})}),Object(n.jsx)("button",{onClick:function(){var e=new o.a.auth.GoogleAuthProvider;o.a.auth().signInWithPopup(e)},children:"Sign in with Google"})]})})};c(33);var v=function(){function e(){return(e=Object(j.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.a.auth().currentUser.uid,c=o.a.firestore().collection("users").doc(t),e.next=4,c.get();case 4:if(e.sent.exists){e.next=10;break}return e.next=8,o.a.firestore().collection("users").doc(t).set({uid:t,subtopic:"default"});case 8:return e.next=10,o.a.firestore().collection("subtopics").add({uid:t,name:"default"});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)("div",{className:"SignOut",children:[Object(n.jsxs)("p",{children:["Signed in as ",o.a.auth().currentUser.displayName]}),Object(n.jsx)("img",{src:o.a.auth().currentUser.photoURL?o.a.auth().currentUser.photoURL:f,alt:""}),Object(n.jsx)("button",{onClick:function(){return o.a.auth().signOut()},children:"Sign Out"})]})};c(34);var g=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),c=t[0],i=t[1],a=Object(r.useState)(""),s=Object(b.a)(a,2),u=s[0],l=s[1],p=o.a.auth().currentUser.uid,f=o.a.firestore().collection("subtopics"),O=f.where("uid","==",p).orderBy("name"),x=Object(h.a)(O,{idField:"id"}),m=Object(b.a)(x,1)[0],v=o.a.firestore().collection("users").doc(p),g=Object(h.b)(v),k=Object(b.a)(g,1)[0];function y(){return(y=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!1),o.a.firestore().collection("subtopics").where("uid","==",p).where("name","==",t).get().then((function(e){var t=o.a.firestore().batch();e.forEach((function(e){t.delete(e.ref)})),t.commit()})),o.a.firestore().collection("tickets").where("uid","==",p).where("subtopic","==",t).get().then((function(e){var t=o.a.firestore().batch();e.forEach((function(e){t.delete(e.ref)})),t.commit()})),e.next=5,o.a.firestore().collection("users").doc(p).update({subtopic:"default"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(j.a)(d.a.mark((function e(t){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=u,l(""),e.next=5,f.where("uid","==",p).get();case 5:if(n=e.sent,!n.docs.map((function(e){return e.data()})).some((function(e){return e.name===c}))){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,f.add({name:c,uid:p});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return m?Object(n.jsxs)("div",{className:"Subtopics",children:[m.map((function(e){return Object(n.jsx)("div",{className:"subtopic",children:Object(n.jsx)("button",{onClick:function(){return t=e.name,void o.a.firestore().collection("users").doc(p).update({subtopic:t});var t},children:e.name})},e.id)})),Object(n.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(n.jsx)("input",{value:u,type:"text",placeholder:"Subtopic",onChange:function(e){return l(e.target.value)},maxLength:"32",required:!0}),Object(n.jsx)("button",{type:"submit",className:"symbol-button",children:Object(n.jsx)("p",{children:"+"})})]}),Object(n.jsx)("p",{className:"subtopic-title",children:k?k.subtopic:"..."}),k&&"default"!==k.subtopic&&Object(n.jsx)("button",{onClick:function(){return i(!0)},className:"symbol-button",children:Object(n.jsx)("p",{children:"-"})}),c&&Object(n.jsx)("div",{className:"modal",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("h1",{children:['Delete "',null===k||void 0===k?void 0:k.subtopic,'"?']}),Object(n.jsx)("p",{children:"This action is irreversible."}),Object(n.jsx)("button",{onClick:function(){return i(!1)},children:"Cancel"}),Object(n.jsx)("button",{onClick:function(){return function(e){return y.apply(this,arguments)}(null===k||void 0===k?void 0:k.subtopic)},children:"Delete"})]})})]}):Object(n.jsx)("div",{className:"Subtopics",children:Object(n.jsx)("p",{children:"Retrieving subtopics..."})})};o.a.initializeApp({apiKey:"AIzaSyCw5-tDfXVripCiIehoWt8MdbopY7Ug-wk",authDomain:"csaye-team-tracker.firebaseapp.com",projectId:"csaye-team-tracker",storageBucket:"csaye-team-tracker.appspot.com",messagingSenderId:"268589792536",appId:"1:268589792536:web:4a4954b1a06580d4beb26d"});var k=function(){return Object(u.a)(o.a.auth()),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{children:"Ticket Tracker"}),o.a.auth().currentUser&&Object(n.jsx)(v,{})]}),Object(n.jsxs)("div",{className:"flex-items",children:[o.a.auth().currentUser&&Object(n.jsx)(g,{}),o.a.auth().currentUser?Object(n.jsx)(x,{}):Object(n.jsx)(m,{})]})]})},y=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,37)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),r(e),i(e),a(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),y()}},[[35,1,2]]]);
//# sourceMappingURL=main.3a36418d.chunk.js.map