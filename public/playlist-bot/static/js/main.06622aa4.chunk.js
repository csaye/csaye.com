(this["webpackJsonpplaylist-bot"]=this["webpackJsonpplaylist-bot"]||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),s=n(1),i=n.n(s),o=n(5),l=n.n(o),u=(n(12),n(4)),h=n.n(u),d=n(6),j=n(2),b=(n(14),{getAccessToken:function(){if(a)return a;var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);if(e&&t)return a=e[1],r=t[1],window.setTimeout((function(){return a=""}),1e3*r),window.history.pushState("Access Token",null,"/playlist-bot/"),a;window.location="https://accounts.spotify.com/authorize?client_id=".concat("ec09509ab68c41f2a83b66cd2f254ca2","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat("https://csaye.com/playlist-bot/")},search:function(e,t,n,r,c,s){var i={method:"GET",headers:{Authorization:"Bearer ".concat(a)}},o="https://api.spotify.com/v1/search?type=track&offset=".concat(s,"&limit=").concat(r,"&q=").concat(e).concat(t," year:").concat(c,' genre:"').concat(n,'"');return fetch(o,i).then((function(e){if(e.ok)return e.json();throw new Error("Search request failed!")}),(function(e){return console.log(e.message)})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,image:e.album.images[0].url,url:e.external_urls.spotify,uri:e.uri,preview:e.preview_url}})):[]}))},savePlaylist:function(e,t){if(e&&t){var n,a,r=this.getAccessToken(),c={Authorization:"Bearer ".concat(r)};return fetch("https://api.spotify.com/v1/me",{method:"GET",headers:c}).then((function(e){if(e.ok)return e.json();throw new Error("Get request failed!")}),(function(e){return console.log(e.message)})).then((function(r){n=r.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists"),{method:"POST",headers:c,body:JSON.stringify({name:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Post request failed!")}),(function(e){return console.log(e.message)})).then((function(e){a=e.id,fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists/").concat(a,"/tracks"),{method:"POST",headers:c,body:JSON.stringify({uris:t})})}))}))}}}),p=["any genre","blues","chill","classical","club","country","dance","disco","drum and bass","dubstep","edm","electronic","emo","folk","funk","guitar","hardcore","hip-hop","holidays","house","k-pop","metal","party","piano","pop","rap","r-n-b","reggaeton","rock","sad","soul","techno","trance"],f=1960,m=function(e,t){return Math.floor(Math.random()*(t-e)+e)};function g(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(s.useState)(""),g=Object(j.a)(u,2),x=g[0],y=g[1],v=Object(s.useState)(p[0]),k=Object(j.a)(v,2),w=k[0],S=k[1],T=Object(s.useState)(f),N=Object(j.a)(T,2),P=N[0],C=N[1],F=Object(s.useState)(K()),_=Object(j.a)(F,2),A=_[0],E=_[1],L=Object(s.useState)(15),B=Object(j.a)(L,2),M=B[0],q=B[1],G=Object(s.useState)(""),I=Object(j.a)(G,2),J=I[0],z=I[1],D=Object(s.useState)(!1),V=Object(j.a)(D,2),Y=V[0],H=V[1];function K(){return(new Date).getFullYear()}function Q(){return(Q=Object(d.a)(h.a.mark((function e(t){var n,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(P>A)){e.next=4;break}return alert("Please enter a valid year range."),e.abrupt("return");case 4:H(!0),z(""),n="any genre"===w?"":w,r="".concat(P,"-").concat(A),c=x?" NOT ".concat(x):"",s=512,""!==n&&(s/=2),A-P<20&&(s/=2),""!==o&&(s/=4),i=m(0,s),b.search(o,c,n,M,r,i).then((function(e){0===e.length&&alert("No tracks found. Please broaden your search scope."),H(!1),a(e)}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)("div",{className:"Page",children:[Object(c.jsx)("div",{className:"sidebar",children:Object(c.jsxs)("form",{onSubmit:function(e){return Q.apply(this,arguments)},children:[Object(c.jsx)("input",{className:"textInput firstElem",value:o,placeholder:"keyword(s)",maxLength:"64",onChange:function(e){return l(e.target.value)}}),Object(c.jsx)("input",{className:"textInput",value:x,placeholder:"excluded keyword(s)",maxLength:"64",onChange:function(e){return y(e.target.value)}}),Object(c.jsx)("select",{value:w,onChange:function(e){return S(e.target.value)},children:p.map((function(e){return Object(c.jsx)("option",{value:e,children:e},"genre-".concat(e))}))}),Object(c.jsxs)("label",{htmlFor:"range-minyear",children:["Min Year: ",P]}),Object(c.jsx)("input",{id:"range-minyear",type:"range",min:f,max:K(),defaultValue:P,step:"1",onChange:function(e){return C(e.target.value)}}),Object(c.jsxs)("label",{htmlFor:"range-maxyear",children:["Max Year: ",A]}),Object(c.jsx)("input",{id:"range-maxyear",type:"range",min:f,max:K(),defaultValue:K(),step:"1",onChange:function(e){return E(e.target.value)}}),Object(c.jsxs)("label",{htmlFor:"range-limit",children:["Track Count: ",M]}),Object(c.jsx)("input",{id:"range-limit",type:"range",min:"1",max:"30",defaultValue:"15",step:"1",onChange:function(e){return q(e.target.value)}}),Object(c.jsx)("button",{type:"submit",children:"Generate Playlist"})]})}),Object(c.jsxs)("div",{className:"listing",children:[Y&&Object(c.jsx)("p",{className:"loadingText",id:"loadingText",children:"Loading..."}),n.length>0&&!Y&&Object(c.jsxs)("div",{className:"saveTrack",children:[Object(c.jsx)("input",{value:J,placeholder:"playlist name",maxLength:"64",onChange:function(e){return z(e.target.value)}}),Object(c.jsx)("button",{onClick:function(){var e=n.map((function(e){return e.uri})),t=J||"New Playlist";b.savePlaylist(t,e),alert('Playlist "'.concat(t,'" saved successfully'))},children:"Save Playlist"})]}),!Y&&n.map((function(e){return Object(c.jsx)(O,{message:e},e.id)}))]})]})}function O(e){var t=e.message,n=t.name,a=t.artist,r=t.album,s=t.image,i=t.url;return Object(c.jsx)("div",{className:"Track",children:Object(c.jsxs)("a",{href:i,target:"_blank",rel:"noreferrer",children:[Object(c.jsx)("img",{src:s,alt:r}),Object(c.jsxs)("div",{className:"text",children:[Object(c.jsx)("h1",{children:n}),Object(c.jsx)("p",{children:a}),Object(c.jsx)("p",{children:r})]})]})})}var x=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Playlist Bot"})}),Object(c.jsx)("section",{children:b.getAccessToken()&&Object(c.jsx)(g,{})})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};l.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root")),y()}},[[15,1,2]]]);
//# sourceMappingURL=main.06622aa4.chunk.js.map